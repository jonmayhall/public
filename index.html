<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>myKaarma – Interactive Training Checklist</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="app">
    <!-- Sidebar -->
    <aside id="sidebar">
      <div class="sidebar-header">
        <img src="mykaarma_logo.png" alt="myKaarma logo" class="logo" />
      </div>
      <nav>
        <button class="nav-btn" data-target="pretraining">Pre-Training Checklist</button>
        <button class="nav-btn" data-target="dealership-info">Dealership Information</button>
        <button class="nav-btn" data-target="training-checklist">Training Checklist</button>
        <button class="nav-btn" data-target="opcodes">Opcodes & Pricing</button>
        <button class="nav-btn" data-target="dms-integration">DMS Integration</button>
        <button class="nav-btn" data-target="workflow">Workflow Notifications</button>
        <button class="nav-btn" data-target="training-summary">Training Summary</button>
      </nav>
    </aside>

    <!-- Main content -->
    <main id="content">

      <!-- Pre-Training -->
      <section id="pretraining" class="page-section active">
        <h1>Pre-Training Checklist</h1>
        <div class="section-block">
          <h2>Handoff Notes</h2>
          <div class="checklist-row"><label>Deployment handoff?</label><select><option></option><option>Yes</option><option>No</option><option>N/A</option></select></div>
          <div class="checklist-row"><label>ServiceCart handoff?</label><select><option></option><option>Yes</option><option>No</option><option>N/A</option></select></div>
          <div class="checklist-row"><label>Scheduler handoff?</label><select><option></option><option>Yes</option><option>No</option><option>N/A</option></select></div>
        </div>
      </section>

      <!-- Dealership Info -->
      <section id="dealership-info" class="page-section">
        <h1>Dealership Information</h1>
        <div class="section-block">
          <h2>Wi-Fi Information</h2>
          <div class="checklist-row"><label>Wi-Fi Name</label><input type="text" placeholder="Enter Wi-Fi name…" /></div>
          <div class="checklist-row"><label>Wi-Fi Password</label><input type="text" placeholder="Enter password…" /></div>
        </div>
      </section>

      <!-- Training Checklist -->
      <section id="training-checklist" class="page-section">
        <h1>Training Checklist</h1>

        <!-- ===== TECHNICIANS ===== -->
        <div class="section">
          <div class="section-header">Technicians – Checklist</div>
          <div class="table-container">
            <table id="technicians">
              <thead>
                <tr>
                  <th>Name</th><th>DMS ID</th><th>Login</th><th>Workflow</th><th>Mobile App Menu</th><th>Search Bar</th><th>RO Assignment</th><th>Dispatch</th><th>RO History</th><th>Prev. Declines</th><th>OCR</th><th>Edit ASR</th><th>ShopChat / Parts</th><th>Adding Media</th><th>Status Change</th><th>Notifications</th><th>Filters</th>
                </tr>
              </thead>
              <tbody>
                <tr><td><input type="text" placeholder="Technician Name" /></td><td><input type="text" placeholder="DMS ID" /></td></tr>
                <tr><td><input type="text" placeholder="Technician Name" /></td><td><input type="text" placeholder="DMS ID" /></td></tr>
                <tr><td><input type="text" placeholder="Technician Name" /></td><td><input type="text" placeholder="DMS ID" /></td></tr>
              </tbody>
            </table>
          </div>
          <button class="add-row" data-target="technicians">+</button>
        </div>

        <!-- ===== PARTS ===== -->
        <div class="section">
          <div class="section-header">Parts Representatives – Checklist</div>
          <div class="table-container">
            <table id="parts">
              <thead>
                <tr>
                  <th>Name</th><th>DMS ID</th><th>Login</th><th>Web App</th><th>Workflow</th><th>Search Bar</th><th>Take Function</th><th>DMS History</th><th>Prev. Declines</th><th>Parts Tab</th><th>SOP</th><th>Edit ASR</th><th>ShopChat / Parts</th><th>Status Change</th><th>Notifications</th><th>Filters</th>
                </tr>
              </thead>
              <tbody>
                <tr><td><input type="text" placeholder="Parts Name" /></td><td><input type="text" placeholder="DMS ID" /></td></tr>
                <tr><td><input type="text" placeholder="Parts Name" /></td><td><input type="text" placeholder="DMS ID" /></td></tr>
              </tbody>
            </table>
          </div>
          <button class="add-row" data-target="parts">+</button>
        </div>

        <!-- ===== ADVISORS ===== -->
        <div class="section">
          <div class="section-header">Service Advisors – Checklist</div>
          <div class="table-container">
            <table id="advisors">
              <thead>
                <tr>
                  <th>Name</th><th>DMS ID</th><th>Login</th><th>Mobile App Menu</th><th>MCI</th><th>Workflow</th><th>Search Bar</th><th>RO Assignment</th><th>DMS History</th><th>Prev. Declines</th><th>OCR</th><th>Edit ASR</th><th>ShopChat</th><th>Status Change</th><th>MPI Send</th><th>SOP</th>
                </tr>
              </thead>
              <tbody>
                <tr><td><input type="text" placeholder="Advisor Name" /></td><td><input type="text" placeholder="DMS ID" /></td></tr>
                <tr><td><input type="text" placeholder="Advisor Name" /></td><td><input type="text" placeholder="DMS ID" /></td></tr>
                <tr><td><input type="text" placeholder="Advisor Name" /></td><td><input type="text" placeholder="DMS ID" /></td></tr>
              </tbody>
            </table>
          </div>
          <button class="add-row" data-target="advisors">+</button>
        </div>

        <!-- ===== BDC ===== -->
        <div class="section">
          <div class="section-header">BDC Representatives – Checklist</div>
          <div class="table-container">
            <table id="bdc">
              <thead>
                <tr>
                  <th>Name</th><th>DMS ID</th><th>Login</th><th>Scheduler</th><th>Declined Services</th><th>ServiceConnect</th><th>Call Routing</th>
                </tr>
              </thead>
              <tbody>
                <tr><td><input type="text" placeholder="BDC Name" /></td><td><input type="text" placeholder="DMS ID" /></td></tr>
                <tr><td><input type="text" placeholder="BDC Name" /></td><td><input type="text" placeholder="DMS ID" /></td></tr>
              </tbody>
            </table>
          </div>
          <button class="add-row" data-target="bdc">+</button>
        </div>

        <!-- ===== PICKUP & DELIVERY ===== -->
        <div class="section">
          <div class="section-header">Pick Up & Delivery Drivers – Checklist</div>
          <div class="table-container">
            <table id="pickup">
              <thead>
                <tr><th>Name</th><th>DMS ID</th><th>Login</th><th>PU&D</th><th>Notifications</th></tr>
              </thead>
              <tbody>
                <tr><td><input type="text" placeholder="Driver Name" /></td><td><input type="text" placeholder="DMS ID" /></td></tr>
                <tr><td><input type="text" placeholder="Driver Name" /></td><td><input type="text" placeholder="DMS ID" /></td></tr>
              </tbody>
            </table>
          </div>
          <button class="add-row" data-target="pickup">+</button>
        </div>
      </section>

      <section id="opcodes" class="page-section"><h1>Opcodes & Pricing</h1></section>
      <section id="dms-integration" class="page-section"><h1>DMS Integration</h1></section>
      <section id="workflow" class="page-section"><h1>Workflow Notifications</h1></section>
      <section id="training-summary" class="page-section"><h1>Training Summary</h1></section>
    </main>
  </div>

  <!-- Floating buttons -->
  <div id="floating-buttons">
    <button id="pdfButton" class="floating-btn">Save as PDF</button>
    <button id="exportButton" class="floating-btn secondary">Export JSON</button>
  </div>

  <!-- Inline Script -->
  <script>
    // Sidebar Navigation
    document.querySelectorAll(".nav-btn").forEach(btn=>{
      btn.addEventListener("click",()=>{
        const target=btn.getAttribute("data-target");
        document.querySelectorAll(".page-section").forEach(s=>s.classList.remove("active"));
        document.getElementById(target).classList.add("active");
        window.scrollTo({top:0});
      });
    });

    // Add-Row Logic
    document.querySelectorAll(".add-row").forEach(btn=>{
      btn.addEventListener("click",()=>{
        const table=document.getElementById(btn.dataset.target);
        const firstRow=table.querySelector("tbody tr");
        const clone=firstRow.cloneNode(true);
        clone.querySelectorAll("input").forEach(i=>i.value="");
        clone.querySelectorAll("select").forEach(s=>{s.selectedIndex=0; s.style.backgroundColor="white";});
        table.querySelector("tbody").appendChild(clone);
      });
    });

    // Dropdown Color Coding
    function colorSelect(sel){
      const v=sel.value;
      const colors={"Yes":"#c9f7c0","Web Only":"#fff8b3","Mobile Only":"#ffe0b3","No":"#ffb3b3","Not Trained":"#ffb3b3","N/A":"#f2f2f2"};
      sel.style.backgroundColor=colors[v]||"white";
    }
    document.addEventListener("change",e=>{
      if(e.target.tagName==="SELECT"){colorSelect(e.target);}
    });

    // PDF Export
    document.getElementById("pdfButton").addEventListener("click",()=>{
      const active=document.querySelector(".page-section.active");
      import("https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js")
        .then(html2pdf=>{
          html2pdf.default().from(active).save(`${active.id}.pdf`);
          alert("✅ PDF saved successfully!");
        });
    });

    // JSON Export
    document.getElementById("exportButton").addEventListener("click",()=>{
      const data={};
      document.querySelectorAll("input,select,textarea").forEach(el=>{
        const key=`${el.closest("section")?.id||"global"}_${el.placeholder||el.previousElementSibling?.textContent||"field"}`;
        data[key]=el.value;
      });
      const blob=new Blob([JSON.stringify(data,null,2)],{type:"application/json"});
      const a=document.createElement("a");
      a.href=URL.createObjectURL(blob);
      a.download="mykaarma-training-data.json";
      a.click();
      alert("✅ Data exported successfully!");
    });
  </script>
</body>
</html>
