<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>myKaarma – Interactive Training Checklist</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="app">
    <aside id="sidebar">
      <div class="sidebar-header">
        <img src="mykaarma_logo.png" alt="myKaarma logo" class="logo" />
      </div>
      <nav>
        <button class="nav-btn" data-target="pretraining">Pre-Training Checklist</button>
        <button class="nav-btn" data-target="dealership-info">Dealership Information</button>
        <button class="nav-btn" data-target="training-checklist">Training Checklist</button>
      </nav>
    </aside>

    <main id="content">
      <section id="pretraining" class="page-section active">
        <h1>Pre-Training Checklist</h1>
        <div class="section-block">
          <h2>Handoff Notes</h2>
          <div class="checklist-row"><label>Deployment handoff?</label><select><option></option><option>Yes</option><option>No</option><option>N/A</option></select></div>
        </div>
      </section>

      <section id="dealership-info" class="page-section">
        <h1>Dealership Information</h1>
        <div class="section-block">
          <h2>Wi-Fi Information</h2>
          <div class="checklist-row"><label>Wi-Fi Name</label><input type="text" placeholder="Enter Wi-Fi name…" /></div>
        </div>
      </section>

      <section id="training-checklist" class="page-section">
        <h1>Training Checklist</h1>
        <div id="tables-container"></div>
      </section>
    </main>
  </div>

  <button id="pdfButton" class="floating-btn">Save as PDF</button>

  <script>
    document.querySelectorAll(".nav-btn").forEach(btn=>{
      btn.addEventListener("click",()=>{
        const target=btn.getAttribute("data-target");
        document.querySelectorAll(".page-section").forEach(s=>s.classList.remove("active"));
        document.getElementById(target).classList.add("active");
      });
    });

    const roles = [
      {id:"technicians", title:"Technicians – Checklist", rows:3, cols:["DMS ID","Login","Workflow","Mobile App Menu","Search Bar","RO Assignment","Dispatch","RO History","Prev. Declines","OCR","Edit ASR","ShopChat / Parts","Adding Media","Status Change","Notifications","Filters"]},
      {id:"advisors", title:"Service Advisors – Checklist", rows:3, cols:["DMS ID","Login","Workflow","Search Bar","RO Assignment","DMS History","Prev. Declines","OCR","Edit ASR","ShopChat","Status Change","SOP"]}
    ];

    const container = document.getElementById("tables-container");
    roles.forEach(r=>{
      const section = document.createElement("div");
      section.classList.add("section");
      section.innerHTML = `
        <div class="section-header">${r.title}</div>
        <div class="table-container">
          <table id="${r.id}" class="training-table">
            <thead><tr><th>Name</th>${r.cols.map(c=>`<th>${c}</th>`).join("")}</tr></thead>
            <tbody>
              ${Array.from({length:r.rows}).map(()=>`
                <tr>
                  <td><input type="text" placeholder="Name"></td>
                  ${r.cols.map(()=>`<td><select><option></option><option>Yes</option><option>No</option><option>Not Trained</option><option>N/A</option></select></td>`).join("")}
                </tr>`).join("")}
            </tbody>
          </table>
        </div>
        <button class="add-row" data-target="${r.id}">+</button>
      `;
      container.appendChild(section);
    });

    document.addEventListener("click",e=>{
      if(e.target.classList.contains("add-row")){
        const id=e.target.dataset.target;
        const t=document.getElementById(id);
        const first=t.querySelector("tbody tr");
        const clone=first.cloneNode(true);
        clone.querySelectorAll("input").forEach(i=>i.value="");
        t.querySelector("tbody").appendChild(clone);
      }
    });

    document.querySelectorAll("textarea").forEach(t=>{
      t.addEventListener("input",()=>{
        t.style.height="auto";
        t.style.height=t.scrollHeight+"px";
      });
    });
  </script>
</body>
</html>
